test_hh_127062965

Задание: Система бронирования столиков
Что мы строим
Вы разрабатываете backend для платформы бронирования столиков в ресторанах.
Как это работает:
Клиент заходит в приложение, выбирает ресторан, дату и время, указывает количество гостей.
Система должна проверить доступность столиков и создать бронирование. Процесс происходит
асинхронно — сначала заявка создается, потом система проверяет есть ли свободные столики на
это время и обновляет статус.
Техническая задача
Построить event-driven систему из двух сервисов, которые общаются через Kafka.
API Service — принимает HTTP-запросы, сохраняет брони и публикует события.
Booking Service — слушает события и выполняет бизнес-логику проверки доступности.
PostgreSQL (или SQLite) — хранение броней.
Kafka — брокер сообщений.
Архитектура системы
API Service
Принимает HTTP-запросы на создание и просмотр броней.
При создании новой брони сохраняет её в базу данных и отправляет событие в Kafka.
Booking Service
Слушает события из Kafka.
Проверяет доступность столиков в ресторане на указанное время.
Обновляет статус брони в базе данных.
Жизненный цикл бронирования
Каждая бронь проходит через следующие этапы:
CREATED → CHECKING_AVAILABILITY → [CONFIRMED | REJECTED]
CREATED — бронь только что создана через API.
CHECKING_AVAILABILITY — система проверяет есть ли свободные столики.
CONFIRMED — столик зарезервирован.
REJECTED — бронь отклонена.
API сервис
Создание брони
POST /bookings
Принимает данные о брони: ресторан, дата и время, количество гостей.
Получение информации о брони
GET /bookings/\:bookingId
Возвращает полную информацию о брони, включая текущий статус.
Проверка доступности
Если в ресторане уже существует бронь на это время — новая бронь отклоняется.
Иначе — подтверждается.
